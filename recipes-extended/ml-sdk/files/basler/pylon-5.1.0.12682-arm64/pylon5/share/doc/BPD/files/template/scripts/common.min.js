(function(){var t;(t=window.rh.consts)("KEY_PROJECT_TOPICLIST",".p.topiclist"),t("KEY_PROJECT_BRSLIST",".p.brslist"),t("KEY_PROJECT_TAG_COMBINATIONS",".p.tag_combinations"),t("KEY_PROJECT_TAG_STATES",".p.tag_states"),t("KEY_MERGED_FILTER_KEY",".p.tags"),t("KEY_PROJECT_FILTER_CAPTION",".p.filter_caption"),t("KEY_PROJECT_FILTER_TYPE",".p.filter_type"),t("KEY_PROJECT_LIST",".p.projects"),t("KEY_MASTER_PROJECT_LIST",".p.masterprojects"),t("KEY_SEARCH_RESULTS",".p.searchresults"),t("KEY_SEARCH_RESULT_PARAMS",".p.searchresultparams"),t("KEY_ONSEARCH_TAG_STATES",".p.onsearchtagstates"),t("KEY_LNG",".p.lng_db"),t("KEY_DEFAULT_FILTER",".p.deffilter"),t("PROJECT_GLOSSARY_DATA",".p.glodata"),t("PROJECT_INDEX_DATA",".p.idxdata"),t("KEY_MERGED_PROJECT_MAP",".mp.tmap"),t("KEY_TOPIC_URL",".t.topicurl"),t("KEY_TOPIC_ID",".t.topicid"),t("KEY_TOPIC_TITLE",".t.topictitle"),t("KEY_TOPIC_BRSMAP",".t.brsmap"),t("KEY_TOPIC_ORIGIN",".t.origin"),t("KEY_TOPIC_HEIGHT",".t.topic_height"),t("KEY_SEARCH_TERM",".l.searchterm"),t("KEY_SEARCHED_TERM",".l.searched_term"),t("KEY_TAG_EXPRESSION",".l.tag_expression"),t("KEY_UI_MODE",".l.uimode"),t("KEY_BASE_IFRAME_NAME",".l.base_iframe_name"),t("KEY_CAN_HANDLE_SERCH",".l.can_handle_search"),t("KEY_CAN_HANDLE_SEARCH",".l.can_handle_search"),t("KEY_CSH_MODE",".l.csh_mode"),t("KEY_ONSEARCH_TAG_EXPR",".l.onsearchtagexpr"),t("KEY_AND_SEARCH",".l.andsearch"),t("KEY_FEATURE",".l.features"),t("KEY_SEARCH_PROGRESS",".l.search_progress"),t("KEY_LAYOUT_VERSION",".l.layout_version"),t("KEY_TOPIC_IN_IFRAME",".l.topic_in_iframe"),t("KEY_SHOW_TAGS",".l.showtags"),t("KEY_DIR",".l.dir"),t("KEY_SEARCH_LOCATION",".l.search_location"),t("KEY_DEFAULT_SEARCH_LOCATION",".l.default_search_location"),t("KEY_FILTER_LOCATION",".l.filter_location"),t("KEY_ACTIVE_TAB",".l.active_tab"),t("KEY_DEFAULT_TAB",".l.default_tab"),t("KEY_ACTIVE_TOPIC_TAB",".l.active_topic_tab"),t("KEY_TOC_DRILL_DOWN",".l.toc_drilldown"),t("KEY_MOBILE_TOC_DRILL_DOWN",".l.mobile_toc_drilldown"),t("KEY_PUBLISH_MODE",".l.publish_mode"),t("KEY_PUBLISH_BASE_URL",".l.publish_base_url"),t("KEY_PROJECTS_BASE_URL",".l.projects_base_url"),t("KEY_INDEX_FILTER",".l.idxfilter"),t("EVT_BASE_IFRAME_LOAD",".e.base_iframe_load"),t("EVT_SCROLL_TO_TOP",".e.scroll_to_top"),t("EVT_SEARCH_TERM",".e.search_term"),t("EVT_NAVIGATE_TO_URL",".e.navigate_to_url"),t("EVT_PROJECT_LOADED",".e.project_loaded"),t("EVT_TOC_LOADED",".e.toc_loaded"),t("EVT_TOPIC_HIDDEN",".e.topic_hidden"),t("EVT_TOPIC_LOADED",".e.topic_loaded"),t("EVT_TOPIC_LOADING",".e.topic_loading"),t("EVT_BOOKMARK",".e.bookmark."),t("EVT_PRINT_TOPIC",".e.print_topic"),t("EVT_SEARCH_IN_PROGRESS",".e.search_in_progress"),t("EVT_RELOAD_TOPIC",".e.reload_topic"),t("EVT_QUERY_SEARCH_RESULTS",".e.query_search_results"),t("EVT_LOAD_IDX",".e.load_idx"),t("EVT_LOAD_GLO",".e.load_glo"),t("HASH_KEY_RH_HIGHLIGHT","rhhlterm"),t("HASH_KEY_RH_SYNS","rhsyns"),t("HASH_KEY_RH_SEARCH","rhsearch"),t("HASH_KEY_RH_TOCID","rhtocid"),t("HASH_KEY_TOPIC","t"),t("HASH_KEY_UIMODE","ux"),t("HASH_KEY_RANDOM","random"),t("PATH_PROJECT_TAGDATA_FILE","whxdata/whtagdata.js"),t("CORDOVA_JS_URL","cordova.js"),t("RHS_LOG_TOPIC_VIEW",{mgr:"sys",cmd:"logtpc"}),t("RHS_DO_SEARCH",{mgr:"agm",agt:"nls",cmd:"search"}),t("KEY_MOBILE_APP_MODE",".m.mobileapp")}).call(this),function(){var o,u,t,a,e,_,E,c,d,h;e=window.rh,u=e._,a=e.model,t=e.consts,o=t("KEY_MERGED_PROJECT_MAP"),u.parseProjectName=function(t){return t.replace(/\.\//g,"").replace(/\.$/,"").replace(/\/$/,"")},u.mapTagIndex=function(t,e){return null==e&&(e=""),t?t+"+"+e:t},u.getTags=function(t,e){var r,n,i;return null==e&&(e=""),null==t?t:(r=a.get(o),-1!==(n=t.indexOf("+"))&&(e=t.substring(n+1,t.length),t=t.substring(0,n)),null!=(null!=(i=r[e=u.parseProjectName(e)])?i[t]:void 0)?r[e][t]:t)},u.getProjectName=function(t){var e,r,n;if(e=a.get(o),null!=t&&null!=e){for(t=u.parentPath(t),n=u.makeRelativePath(t,u.getHostFolder()),n=u.parseProjectName(n);null==e[n];){if((r=n.lastIndexOf("/"))<0){n="";break}n=n.substring(0,r)}t=n}return t},u.evalTagExpression=function(t,e,r){var n,i;return null==r&&(r=""),!e||0===e.length||(!(n=u.getTags(t,r))||0===n.length||(1===n.length&&(""===n[0]||"$"===n[0])||(i=!1,!u.any(e,function(t){if(u.evalMultipleTagExpression(t.c,n))i=!0;else if(t.c.length&&u.evalMultipleTagExpression(t.u,n))return!0;return!1})&&i)))},u.evalMultipleTagExpression=function(t,e){return u.any(t,function(t){return u.evalSingleTagExpression(t,e)})},u.evalSingleTagExpression=(_={},h=["&","|","!"],E=function(t){var e;return e=t.splice(t.length-2),t.push(1===e[0]&&1===e[1]?1:0)},d=function(t){var e;return e=t.splice(t.length-2),t.push(1===e[0]||1===e[1]?1:0)},c=function(t,e){var r;return r=t.splice(t.length-1),t.push(1===r[0]?0:1)},function(t,e){var r,n,i,o,a,s,l;if(null!=(o=_[n=t+":"+e]))return o;if(1<(l=u.map(t.split(" "),function(t){return-1!==h.indexOf(t)?t:-1===e.indexOf(t)?0:1})).length){for(a=[],r=0,i=l.length;r<i;r++)switch(s=l[r]){case"&":E(a);break;case"|":d(a);break;case"!":c(a);break;default:a.push(s)}o=a[0]}else o=l[0];return _[n]=o})}.call(this),function(){var s,l,u,_,t;t=window.rh,l=t._,s=t.$,u=t.consts,_=t.model,l.hookClick=function(t){var e,r,n,i,o,a;if(!("button"in t&&0!==t.button||t.defaultPrevented)){for(document.body,o=t.target;o&&o!==document&&!(n=s.getAttribute(o,"href"));)o=o.parentNode;if(n&&(n=decodeURI(n),i=_.get(u("KEY_MOBILE_APP_MODE")),!(a=s.getAttribute(o,"target"))||"_self"===a||i)){if("#"===n[0]&&l.isRootUrl())return 1<n.length&&(r=""+u("EVT_BOOKMARK")+n,_.isSubscribed(r)?_.publish(r,""):_.publish(u("EVT_NAVIGATE_TO_URL"),{absUrl:""+l.getRootUrl()+n})),l.preventDefault(t);if(l.isValidFileUrl(n)){if(l.isRelativeUrl(n)&&(e=window._getFullPath(l.parentPath(),n)),null==e&&(e=n),!(!i&&a||l.isUrlAllowdInIframe(e)))return s.setAttribute(o,"target","_blank");if(_.publish(u("EVT_NAVIGATE_TO_URL"),{absUrl:e}),!a)return l.preventDefault(t)}}}}}.call(this),function(){var i,t,o,a,s,l=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty;s=window.rh,o=s._,i=s.$,a=s.consts,s.model.subscribe(a("EVT_PROJECT_LOADED"),function(){return s.model.subscribe(a("KEY_MERGED_PROJECT_MAP"),function(){var t;return t=o.getProjectName(o.filePath()),s.model.publish(a("KEY_TOPIC_ORIGIN"),t)})}),t=function(t){var n;function r(t){var e;this.onTagExpr=l(this.onTagExpr,this),r.__super__.constructor.call(this,t),this.ids=t.ids,this.className=t.className||"rh-hide",this.node=t.node,this.hoverClass="rh-tag-content-hover",this.supClass="rh-applied-tag",this.createTagNode(),this.ids?this.subscribe(a("KEY_TOPIC_ORIGIN"),(e=this,function(){return e.subscribe(a("KEY_TAG_EXPRESSION"),e.onTagExpr)})):s._debug&&s._d("error","data-tags without any tag combination")}return function(t,e){for(var r in e)u.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(r,s.Widget),r.prototype.preventClick=function(t){return o.preventDefault(t),!1},r.prototype.onTagExpr=function(e){var t,r;return r=this.get(a("KEY_TOPIC_ORIGIN")),this.get("tags")||(this.tags=o.union(this.ids,function(t){return o.getTags(t,r)}),this.publish("tags",this.tags.join(","))),t=!o.any(this.ids,function(t){return o.evalTagExpression(t,e,r)}),this.toggleClass(t),"rh-hide"!==this.className&&this.toggleClick(t),this.applied=t},r.prototype.toggleClass=function(t){return t?(i.hasClass(this.node,"selected")&&model.publish(a("EVT_TOPIC_HIDDEN"),!0),this.applied?void 0:i.addClass(this.node,this.className)):i.removeClass(this.node,this.className)},r.prototype.toggleClick=function(t){if(t){if(!this.applied)return o.addEventListener(this.node,"click",this.preventClick)}else if(this.applied)return o.removeEventListener(this.node,"click",this.preventClick)},r.prototype.onHover=function(){return i.addClass(this.node,this.hoverClass)},r.prototype.onMouseOut=function(){return i.removeClass(this.node,this.hoverClass)},n=["IMG","OBJECT","VIDEO"],r.prototype.appendNode=function(t){var e,r;return e=this.node,r=null,-1!==n.indexOf(this.node.nodeName)&&(e=this.node.parentNode,r=this.node.nextSibling),r?e.insertBefore(t,r):e.appendChild(t),this.resolveDataAttrs(t)},r.prototype.getAptNames=function(){return this.subscribe("tags",(t=this,function(){var r;return r=[],o.each(t.tags,function(t,e){return r.push(t.replace("att_sep",":"))}),t.publish("showtags",r.join(","))}));var t},r.prototype.createTagNode=function(){return this.subscribe(a("KEY_SHOW_TAGS"),(r=this,function(t){var e;if(t&&!(0<i.find(r.node,"sup."+r.supClass).length))return e=document.createElement("sup"),r.getAptNames(),i.setAttribute(e,"data-text","showtags"),i.setAttribute(e,"data-mouseover","this.onHover()"),i.setAttribute(e,"data-mouseout","this.onMouseOut()"),i.setAttribute(e,"class",r.supClass),r.appendNode(e)}));var r},r}(),window.rh.widgets.ContentFilter=t}.call(this),function(){var a,n,_,t,E;E=window.rh,a=E.$,_=E._,t=E.consts,n=function(){var o;function t(t,e,r){var n,i,o,a,s;this.node=t,this.index=e,s=(a=this.parseArg(r)).view,i=a.attrs,o=a.model,n=a.argModel,i&&this.setAttributes(this.node,i),o&&this.setModelArg(this.node,_.extend({},o,n)),s&&this.createView(s,n)}return o={"data-rhwidget":";",class:" "},t.prototype.parseArg=function(t){var e,r,n,i,o,a,s,l,u;return u=t.wName,l=t.wArg,o=t.pipedArgs,(n=E.edWidget(u))&&(s=n.view,r=n.attrs,a=n.vars,i=n.model,e=_.resolveNiceJSON(o.shift()),this.vars=_.extend({},a,l)),{view:s,attrs:r,model:i,argModel:e}},t.prototype.createView=function(t,e){var r,n;return r=_.extend({},t.model,e),n=document.createElement(t.tag||"div"),t.attrs&&this.setAttributes(n,t.attrs),this.setModelArg(n,r),this.node.parentNode.insertBefore(n,this.node)},t.prototype.setAttributes=function(r,t){return _.each(t,function(t,e){return a.setAttribute(r,e,this.resolveValue(this.mergedValue(r,e,t)))},this)},t.prototype.setModelArg=function(t,e){var r;if(!_.isEmptyObject(e))return r=this.resolveValue(JSON.stringify(e)),a.dataset(t,"rhwidget",(a.dataset(t,"rhwidget")||"Basic")+" | "+r)},t.prototype.mergedValue=function(t,e,r){var n,i;return(i=o[e])&&(n=a.getAttribute(t,e)||"")?""+n+i+r:r},t.prototype.resolveValue=function(t){return _.resolveEnclosedVar(t,(e=this,function(t){switch(t){case"this":return JSON.stringify(e.vars);case"@index":return e.index;default:return e.vars[t]}}));var e},t}(),E.model.subscribe(t("EVT_WIDGET_BEFORELOAD"),function(){return _.each(a.find(document,"[data-edwidget]"),function(e,r){var t;return t=_.resolveWidgetArgs(a.dataset(e,"edwidget")),_.each(t,function(t){return new n(e,r,t)}),a.dataset(e,"edwidget",null)})}),E.edWidget=_.cache(_.isObject)}.call(this),function(){(0,window.rh.edWidget)("tab",{attrs:{"data-table":"data","data-rhwidget":"Basic","data-output":"data: edw.data.#{@index}",class:"print-only"},view:{tag:"div",attrs:{"data-rhwidget":"Basic: include: edwidgets/tab/tabLayout.js","data-input":"data: edw.data.#{@index}"},model:{tab:"0"}}})}.call(this),function(l,u,t){"use strict";var _=function(){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}();function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function o(a,s,l){function u(r,t){if(!s[r]){if(!a[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(_)return _(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[r]={exports:{}};a[r][0].call(i.exports,function(t){var e=a[r][1][t];return u(e||t)},i,i.exports,o,a,s,l)}return s[r].exports}for(var _="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,r){var n,i,o=l.rh,a=o._,s=o.consts;a.getHostFolder=(n=void 0,n=null,function(){return null==n&&(n=a.isLocal()?l.gHostPath:u.location.protocol+"//"+l.gHost+l.gHostPath),n}),a.getHostData=function(t){var e;return e=l._getFullPath(a.parentPath(),t+"/"),l._isHTTPUrl(e)?{gHost:l._getHostNameFromURL(e),gHostPath:l._getPathFromURL(e)}:{gHost:"",gHostPath:e}},a.getHashMapForRoot=function(t,e){var r=void 0,n=void 0;return null==e&&(e=null),t=a.fixRelativeUrl(t),n=a.urlParams(a.extractParamString(t)),e&&(n[s("RHMAPID")]=null,n[s("RHMAPNO")]=null),r=a.extend(a.urlParams(),n),r=a.fixHashMapForRoot(r)},a.getParamsForRoot=function(t,e){var r,n;return null==e&&(e=null),r=a.getHashMapForRoot(t,e),0===(n=a.mapToEncodedString(r)).length?"":"?"+n},a.isRootUrl=function(t){var e,r,n;return null==t&&(t=decodeURI(u.location.href)),n=a.getRootUrl(),(r=a.filePath(t))===a.filePath(n)||("index.htm"===(e=a.getFileName(n))||"index.html"===e)&&r===a.parentPath(n)},a.isExternalUrl=function(t){var e=void 0;return e=o.model.get(o.consts("KEY_PUBLISH_MODE"))?o.model.get(o.consts("KEY_PROJECTS_BASE_URL")):a.getHostFolder(),t.substring(0,e.length)!==e},a.fixHashMapForRoot=function(t){var e,r,n,i,o;return null==t&&(t={}),n=s("HASH_KEY_RH_SEARCH"),s("HASH_KEY_TOPIC"),o=s("HASH_KEY_UIMODE"),i=s("HASH_KEY_RH_TOCID"),r=s("HASH_KEY_RH_HIGHLIGHT"),e=s("HASH_KEY_RANDOM"),t[o]||(t[o]=null),t[e]=null,t[i]||(t[i]=null),t[r]||(t[r]=null),t[n]||(t[n]=null),t},a.fixRelativeUrl=function(t){return null==t&&(t=""),"."===(t=t.replace(/\/\.\//g,"/"))[0]&&"/"===t[1]&&(t=t.substring(2)),t},a.ensureSlash=function(t){return null!=t&&"/"!==t.substr(-1)&&(t+="/"),t},a.isUrlAllowdInIframe=(i=void 0,i=["",".htm",".html",".asp",".aspx"],function(t){var e,r;return!a.isExternalUrl(t)&&(r=t.substring(a.getHostFolder().length),e=a.getFileExtention(r).toLowerCase(),i.includes(e))})},{}],2:[function(t,e,r){var n=t("./rh").consts;n("RHMAPID","rhmapid"),n("RH_FULL_LAYOUT_PARAM","rhfulllayout"),n("EVT_TOPIC_WIDGET_LOADED",".e.topic_widget_loaded"),n("EVT_CLOSE_SEARCH_SUGGESTION",".e.close_search_suggestion"),n("KEY_TOC_BREADCRUMBS",".p.toc_breadcrumbs"),n("KEY_TOC_SELECT_ITEM",".p.toc_select_item"),n("KEY_TOC_ORDER",".p.toc_order"),n("SEARCH_MAP_ADDR","whxdata/searchAuto_Map_0.js"),n("SEARCH_MODEL_ADDR","whxdata/searchAuto_Model_"),n("SEARCH_INDEX_DATA",".l.search_index_data"),n("SEARCH_INDEX_FILE","whxdata/searchAuto_Index.js"),n("SEARCH_MODEL_KEY",".l.search_model."),n("SEARCH_MAP_KEY",".l.search_map."),n("SEARCH_MAX_TOPICS",20),n("SEARCH_RESULTS_KEY","search_results"),n("STOP_NAVIGATE_TO_TOPIC",".l.stoptopicnav"),n("SEARCH_WORDS_MAP",".l.search_words_map"),n("MAX_SEARCH_INPUT",3),n("KEY_BREADCRUMBS",".l.breadcrumbs"),n("HASH_HOMEPAGE_MODE","homepage"),n("KEY_VIEW_MODE",".l.mode"),n("HELP_LAYOUT_MODE","layout"),n("HELP_SEARCH_MODE","search"),n("HELP_TOPIC_MODE","topic"),n("PREV_SEARCH_KEY","data-prev-search"),n("FAVATTRIBUTE","data-favwidget"),n("FAVBUTTON","fav-button"),n("FAVLIST","fav-list"),n("FAVSTORAGE","fav-store"),n("FAVLINKCLASS","favorite"),n("UNFAVLINKCLASS","unfavorite"),n("FAVTABLECLASS","favoritesholder"),n("FAVTABLETITLECLASS","favorite"),n("FAVTABLEREMOVECLASS","removelink"),n("FAVLISTINTROCLASS","favoritesintro"),n("FAVLISTTABLEINTROCLASS","favoritestableintro"),n("EVENTFAVCHANGE","favorite-changed-in-script"),n("TOPIC_FAVORITE",".l.topic_favorite"),n("KEY_FAVORITES",".l.favorites"),n("FAVORITES_BUTTON_TITLE",".l.favorites_title"),n("EVT_WINDOW_LOADED",".e.win_loaded"),n("KEY_LNG_NAME",".p.lng_name"),n("SHOW_MODAL",".l.show_modal"),n("KEY_HEADER_LOGO_PATH",".l.header.logo"),n("KEY_HEADER_TITLE",".l.header.title"),n("KEY_HEADER_TITLE_COLOR",".l.header.title_color"),n("KEY_HEADER_BACKGROUND_COLOR",".l.header.background_color"),n("KEY_LAYOUT_FONT_FAMILY",".l.layout.font_family"),n("KEY_HEADER_HTML",".l.header.html"),n("KEY_HEADER_CSS",".l.header.css"),n("KEY_HEADER_DEFAULT_BACKGROUND_COLOR",".l.header.default_background_color"),n("KEY_HEADER_DEFAULT_TITLE_COLOR",".l.header.default_title_color"),n("KEY_LAYOUT_DEFAULT_FONT_FAMILY",".l.layout.default_font_family")},{"./rh":3}],3:[function(t,e,r){(function(t){void 0===t.rh&&(t.rh={}),e.exports=t.rh}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==l?l:{})},{}],4:[function(t,e,r){t("../lib/rh"),t("../lib/consts"),t("../../lenient_src/robohelp/common/url_utils"),t("./utils/home_utils"),t("./utils/url_utils"),t("./utils/io_utils"),t("./utils/html_resolver"),t("./layout/data_attrs/popup_image"),t("./layout/data_attrs/focusif"),t("./common/init")},{"../../lenient_src/robohelp/common/url_utils":1,"../lib/consts":2,"../lib/rh":3,"./common/init":5,"./layout/data_attrs/focusif":6,"./layout/data_attrs/popup_image":7,"./utils/home_utils":8,"./utils/html_resolver":9,"./utils/io_utils":10,"./utils/url_utils":12}],5:[function(t,e,r){var n=t("../../lib/rh"),i=n.consts,o=n.$,a=n.model;a.subscribe(i("EVT_PROJECT_LOADED"),function(){var t=o("html",0),e=a.get(i("KEY_LNG_NAME"));t&&e&&""!==e&&o.setAttribute(t,"lang",e)}),a.subscribe(i("KEY_AND_SEARCH"),function(t){return""===t&&a.publish(i("KEY_AND_SEARCH"),"1")})},{"../../lib/rh":3}],6:[function(t,e,r){t("../../../lib/rh").registerDataAttr("focusif",function t(e,r,n){E(this,t),e.subscribeDataExpr(n,function(t){t&&r.focus()})})},{"../../../lib/rh":3}],7:[function(t,e,r){var i=t("../../../lib/rh"),o=i._,a=i.$,s=t("../../utils/html_resolver"),l=t("../../utils/node_utils"),n=function(){function n(t,e,r){E(this,n),a.addClass(e,"popup-image-thumbnail"),this.node=e,i.model.csubscribe("EVT_PROJECT_LOADED",this._addEnlargeButton.bind(this)),this._clickFn=this._getClickFn(r),o.addEventListener(e,"click",this._clickFn)}return _(n,[{key:"_content",value:function(t){var e=[],r=a.createElement("img");if(a.setAttribute(r,"src",t),e.push(r),a.hasAttribute(this.node,"usemap")){var n=a.getAttribute(this.node,"usemap");a.setAttribute(r,"usemap",n),e.push(a(n,0))}return(new s).resolve(o.map(e,function(t){return l.outerHTML(t)}).join(" "))}},{key:"_getClickFn",value:function(t){var e=this;return function(){i.model.cpublish("SHOW_MODAL",{content:e._content(t),isImage:!0})}}},{key:"_addEnlargeButton",value:function(){var t=a.createElement("img",this.node);a.setAttribute(t,"src",this.expandImagePath),a.addClass(t,"rh-expand-icon"),l.insertAfter(this.node,t),o.addEventListener(t,"click",this._clickFn)}},{key:"expandImagePath",get:function(){var t=(new s).makeFullPath("template/images/expand.png",o.getRootUrl());return o.makeRelativeUrl(t)}}]),n}();i.registerDataAttr("popupimage",n)},{"../../../lib/rh":3,"../../utils/html_resolver":9,"../../utils/node_utils":11}],8:[function(t,e,r){var n=t("../../lib/rh"),i=n._,o=n.consts;i.goToHome=function(t,e){var r=o("HOME_FILEPATH");if(r){var n=i.makeFullUrl(r);n=""+n+(void 0===e?"":"?"+i.mapToEncodedString(e))+(void 0===t?"":"#"+i.mapToEncodedString(t)),u.location=n}},i.isHomeUrl=function(t){var e=o("HOME_FILEPATH"),r=i.getRootUrl(),n=i.makeRelativePath(t,r);return e===i.filePath(n)},i.compare=function(t,e){return t===e?0:-1}},{"../../lib/rh":3}],9:[function(t,e,r){var n=t("../../lib/rh"),i=n.$,a=n._,o=t("./node_utils"),s=function(t){var e,r=void 0;return-1!==(e=t.indexOf(":"))&&(r=t.substring(0,e+1).toLowerCase().trim()),r},l=function(){function t(){E(this,t)}return _(t,[{key:"paths",get:function(){return["src","href"]}},{key:"links",get:function(){return["href"]}}]),_(t,[{key:"resolve",value:function(t){var e=this,r=o.toHtmlNode(t);return a.each(r,function(t){o.isElementNode(t)&&i.traverseNode(t,function(t){return e.resolveNode(t)})}),a.reduce(r,function(t,e){return t+=o.outerHTML(e)},"")}},{key:"resolveNode",value:function(e){var r=this;return a.each(this.paths,function(t){return r.resovePaths(e,t)}),a.each(this.links,function(t){return r.resoveLinks(e,t)}),!0}},{key:"resovePaths",value:function(t,e){if(i.hasAttribute(t,e)){var r=i.getAttribute(t,e);i.setAttribute(t,e,this.resovePath(r))}}},{key:"resoveLinks",value:function(t,e){i.hasAttribute(t,e)&&i.setAttribute(t,"data-click","@close(true)")}},{key:"resovePath",value:function(t){if(!a.isRelativeUrl(t))return t;var e=a.getRootUrl(),r=a.makeFullUrl(t);return a.makeRelativeUrl(r,e)}},{key:"makeFullPath",value:function(t,e){if(!this.isRelativeUrl(t)||this.isRelativeUrl(e))return t;var r=this.filePath(e).split("/"),n=this.filePath(t),i=t.substring(n.length),o=n.split("/");return(1<o.length||o[0])&&(r.pop(),a.each(o,function(t){".."===t?r.pop():"."!==t&&r.push(t)})),""+r.join("/")+i}},{key:"isRelativeUrl",value:function(t){return!t||!s(t)&&t.trim().indexOf("/")}},{key:"filePath",value:function(t){var e=void 0;return-1!==(e=(t=t||"").indexOf("?"))&&(t=t.substring(0,e)),-1!==(e=t.indexOf("#"))&&(t=t.substring(0,e)),t}}]),t}();e.exports=l},{"../../lib/rh":3,"./node_utils":11}],10:[function(t,e,r){var n=t("../../lib/rh")._,i={8:"backspace",13:"return",27:"escape",38:"down",40:"up",39:"right"};n.getKeyIndex=function(t){return i[t]?i[t]:"default"}},{"../../lib/rh":3}],11:[function(t,e,r){var n=t("../../lib/rh").$;e.exports={nodeType:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},removeChild:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.parentNode(t);return e&&e.removeChild&&e.removeChild(t)},appendChild:function(t,e){return t&&t.appendChild&&t.appendChild(e)},parentNode:function(t){return t&&t.parentNode},childNodes:function(t){return t&&t.childNodes||[]},toHtmlNode:function(t){return this.childNodes(n.createElement("div",t))},outerHTML:function(t){return t&&t.outerHTML||""},insertAfter:function(t,e){return t.parentNode.insertBefore(e,t.nextSibling)},value:function(t){return t&&t.nodeValue},name:function(t){return t&&t.nodeName},type:function(t){return t&&t.nodeType},isElementNode:function(t){return this.type(t)===this.nodeType.ELEMENT_NODE},isTextNode:function(t){return this.type(t)===this.nodeType.TEXT_NODE}}},{"../../lib/rh":3}],12:[function(t,e,r){var u=t("../../lib/rh"),_=u._;_.addParam=function(t,e,r){var n=_.extractHashString(t),i=_.extractParamString(t),o=_.urlParams(i);o[e]=r;var a=_.stripBookmark(t);a=_.stripParam(a);var s=""===n?n:"#"+n,l=u._.mapToEncodedString(o);return a+(""===l?l:"?"+l)+s},_.removeParam=function(t,e){var r=_.extractHashString(t),n=_.extractParamString(t),i=_.urlParams(n);i[e]=null;var o=_.stripBookmark(t);o=_.stripParam(o);var a=""===r?r:"#"+r,s=u._.mapToEncodedString(i);return o+(""===s?s:"?"+s)+a},_.createHashedUrl=function(t){var e=void 0,r=void 0;if(!_.isRootUrl(t)){var n=_.getRootUrl();_.isExternalUrl(t)?e=t:(r=_.getParamsForRoot(t,!0),e=_.fixRelativeUrl(_.makeRelativePath(t,n)),t=""+n+r+"#t="+encodeURIComponent(e))}return t}},{"../../lib/rh":3}]},{},[4])}(window,document,window.location);